# - - - - - - - - - - - - - - - - - - - - - 
# Ecologist Decisions
# - - - - - - - - - - - - - - - - - - - - - 
# -------------------------------------------------------
#	TERRAFORM CIVICS
# -------------------------------------------------------
# Environmental boost
decision_tec_environment_fix = {
	owned_planets_only = yes
	enactment_time = 360
	icon = decision_animal_wildlife
	resources = {
		category = decisions
		cost = {
			energy = 5000
			influence = 50
			multiplier = value:tec_environment_decision_mult
		}
	}
	
	potential = {
		owner = {
			OR = {
				has_valid_civic = civic_tec_eco_engineers
				has_valid_civic = civic_tec_machine_terraformers
			}
		}
		tec_ecologists_have_modifiers_to_fix = yes
	}
	effect = {
		hidden_effect = {
			# Adds variables
			owner = {
				change_variable = {
					which = tec_terraformed_worlds
					value = 1
				}
			}
		}
		if = {
			limit = {
				has_modifier = "abandoned_terraforming"
			}
			remove_modifier = abandoned_terraforming
			if = {
				limit = {
					NOT = {
						has_modifier = pm_tec_engineered_weather
					}
				}
				add_modifier = {
					modifier = pm_tec_engineered_weather
					days = -1
				}
			}
			add_deposit = d_tec_eco_wildlife_blocker
		}
		if = {
			limit = {
				has_modifier = "dangerous_wildlife"
			}
			remove_modifier = dangerous_wildlife
			add_modifier = {
				modifier = pm_tec_peaceful_wildlife
				days = -1
			}
			add_deposit = d_tec_eco_wildlife_blocker
		}
		if = {
			limit = {
				has_modifier = "hazardous_weather"
			}
			remove_modifier = hazardous_weather
			if = {
				limit = {
					NOT = {
						has_modifier = pm_tec_engineered_weather
					}
				}
				add_modifier = {
					modifier = pm_tec_engineered_weather
					days = -1
				}
			}
		}
		if = {
			limit = {
				has_modifier = "weak_magnetic_field"
			}
			remove_modifier = weak_magnetic_field
			add_modifier = {
				modifier = strong_magnetic_field
				days = -1
			}
		}
		if = {
			limit = {
				OR = {
					has_modifier = "unstable_tectonics"
					has_modifier = @gpm_unstable_tectonics_2
				}
			}
			remove_modifier = unstable_tectonics
			remove_modifier = @gpm_unstable_tectonics_2
			add_modifier = {
				modifier = pm_tec_stable_tectonics
				days = -1
			}
			add_deposit = d_tec_eco_volcano
		}
		if = {
			limit = {
				has_modifier = "tidal_locked"
			}
			remove_modifier = tidal_locked
		}
		if = {
			limit = {
				OR = {
					has_modifier = "asteroid_impacts"
					has_modifier = @gpm_asteroid_impacts_2
				}
			}
			remove_modifier = asteroid_impacts
			remove_modifier = @gpm_asteroid_impacts_2
			add_deposit = d_tec_eco_sinkhole
		}
		if = {
			limit = {
				has_modifier = "wild_storms"
			}
			remove_modifier = wild_storms
			if = {
				limit = {
					NOT = {
						has_modifier = pm_tec_engineered_weather
					}
				}
				add_modifier = {
					modifier = pm_tec_engineered_weather
					days = -1
				}
			}
		}
		if = {
			limit = {
				has_modifier = "high_gravity"
			}
			remove_modifier = high_gravity
		}
		if = {
			limit = {
				has_modifier = "mineral_poor"
			}
			remove_modifier = mineral_poor
			add_deposit = d_tec_eco_mountains_range
		}
		if = {
			limit = {
				has_modifier = "atmospheric_aphrodisiac"
			}
			remove_modifier = atmospheric_aphrodisiac
			if = {
				limit = {
					NOT = {
						has_modifier = pm_tec_engineered_weather
					}
				}
				add_modifier = {
					modifier = pm_tec_engineered_weather
					days = -1
				}
			}
		}
		if = {
			limit = {
				has_modifier = "atmospheric_hallucinogen"
			}
			remove_modifier = atmospheric_hallucinogen
			if = {
				limit = {
					NOT = {
						has_modifier = pm_tec_engineered_weather
					}
				}
				add_modifier = {
					modifier = pm_tec_engineered_weather
					days = -1
				}
			}
		}
		if = {
			limit = {
				has_modifier = "bleak_planet"
			}
			remove_modifier = bleak_planet
			add_deposit = d_tec_eco_jungle
		}
		if = {
			limit = {
				has_modifier = "irradiated_planet"
			}
			remove_modifier = irradiated_planet
		}
		if = {
			limit = {
				has_modifier = @gpm_global_thunderstorms
			}
			remove_modifier = @gpm_global_thunderstorms
			add_modifier = {
				modifier = @gpm_frequent_thunderstorms
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_thin_atmospheres
			}
			remove_modifier = @gpm_thin_atmospheres
			add_modifier = {
				modifier = @gpm_dense_atmospheres
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_strong_volcanism
			}
			remove_modifier = @gpm_strong_volcanism
			add_deposit = d_tec_eco_volcano
		}
		if = {
			limit = {
				has_modifier = @gpm_high_gravity_2
			}
			remove_modifier = @gpm_high_gravity_2
		}
		if = {
			limit = {
				has_modifier = @gpm_hostile_flora
			}
			remove_modifier = @gpm_hostile_flora
			add_deposit = d_tec_eco_kelp
		}
		if = {
			limit = {
				has_modifier = @gpm_toxic_gas
			}
			remove_modifier = @gpm_toxic_gas
			add_deposit = d_tec_eco_swamp
		}
		if = {
			limit = {
				has_modifier = @gpm_titanic_predators
			}
			remove_modifier = @gpm_titanic_predators
			add_modifier = {
				modifier = pm_tec_peaceful_wildlife
				days = -1
			}
			add_deposit = d_tec_eco_wildlife_blocker
		}
		if = {
			limit = {
				has_modifier = @gpm_unusual_seasons
			}
			remove_modifier = @gpm_unusual_seasons
			add_modifier = {
				modifier = @gpm_perfect_seasons
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_simple_organisms
			}
			remove_modifier = @gpm_simple_organisms
			add_modifier = {
				modifier = @gpm_newly_evolved_complex_organisms
				days = -1
			}
			add_deposit = d_tec_eco_wildlife_blocker
		}
		if = {
			limit = {
				has_modifier = @gpm_unusual_formations
			}
			remove_modifier = @gpm_unusual_formations
			add_deposit = d_tec_eco_mountains_range
		}
		if = {
			limit = {
				has_modifier = @gpm_great_temperature_variation
			}
			remove_modifier = @gpm_great_temperature_variation
			add_modifier = {
				modifier = @gpm_perfect_seasons
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_ice_age
			}
			remove_modifier = @gpm_ice_age
			add_deposit = d_tec_eco_glacier
		}
		if = {
			limit = {
				has_modifier = @gpm_locust_plagues
			}
			remove_modifier = @gpm_locust_plagues
			add_deposit = d_tec_eco_wildlife_blocker
		}
		if = {
			limit = {
				has_modifier = @gpm_resilent_parasites
			}
			remove_modifier = @gpm_resilent_parasites
			add_modifier = {
				modifier = @gpm_symbiotic_life
				days = -1
			}
			add_deposit = d_tec_eco_wildlife_blocker
		}
		if = {
			limit = {
				has_modifier = @gpm_trubbles
			}
			remove_modifier = @gpm_trubbles
			add_modifier = {
				modifier = pm_tec_peaceful_wildlife
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_arachnophobia
			}
			remove_modifier = @gpm_arachnophobia
			add_modifier = {
				modifier = pm_tec_peaceful_wildlife
				days = -1
			}
			add_deposit = d_tec_eco_wildlife_blocker
		}
		if = {
			limit = {
				has_modifier = @gpm_giant_worm
			}
			remove_modifier = @gpm_giant_worm
			add_modifier = {
				modifier = pm_tec_peaceful_wildlife
				days = -1
			}
			add_deposit = d_tec_eco_wildlife_blocker
		}
		if = {
			limit = {
				has_modifier = @gpm_sandstorms
			}
			remove_modifier = @gpm_sandstorms
			add_deposit = d_tec_eco_basin
		}
		if = {
			limit = {
				has_modifier = @gpm_quicksand
			}
			remove_modifier = @gpm_quicksand
			add_deposit = d_tec_eco_basin
		}
		if = {
			limit = {
				has_modifier = @gpm_blizzards
			}
			remove_modifier = @gpm_blizzards
			add_modifier = {
				modifier = @gpm_never_ending_aurora
				days = -1
			}
			add_deposit = d_tec_eco_glacier
		}
		if = {
			limit = {
				has_modifier = @gpm_abominable_predators
			}
			remove_modifier = @gpm_abominable_predators
			add_modifier = {
				modifier = pm_tec_peaceful_wildlife
				days = -1
			}
			add_deposit = d_tec_eco_wildlife_blocker
		}
		if = {
			limit = {
				has_modifier = @gpm_giant_ocean_snakes
			}
			remove_modifier = @gpm_giant_ocean_snakes
			add_modifier = {
				modifier = pm_tec_peaceful_wildlife
				days = -1
			}
			add_deposit = d_tec_eco_kelp
		}
		if = {
			limit = {
				has_modifier = @gpm_cursed_world
			}
			remove_modifier = @gpm_cursed_world
		}
		if = {
			limit = {
				has_modifier = @gpm_strange_alien_eggs
			}
			remove_modifier = @gpm_strange_alien_eggs
			add_deposit = d_tec_eco_wildlife_blocker
		}

		if = {
			limit = {
				has_modifier = @gpm_living_planet
			}
			remove_modifier = @gpm_living_planet
			add_deposit = d_tec_eco_wildlife_blocker
			add_deposit = d_tec_eco_wildlife_blocker
		}
	}
	ai_weight = {
		weight = 1
		modifier = {
			factor = 100
			OR = {
				num_pops > 25
				is_capital = yes
			}
		}
		mult = value:tec_environment_decision_mult
	}
}

#Environmental harmony
decision_tec_environment_harmony = {
	owned_planets_only = yes
	enactment_time = 360
	icon = decision_animal_wildlife
	resources = {
		category = decisions
		cost = {
			energy = 5000
			influence = 50
			multiplier = value:tec_environment_decision_mult
		}
	}
	potential = {
		is_colony = yes
		owner = {
			is_regular_empire = yes
		}
		#		owner = {
		#			has_commercial_pact	= root.owner
		#		}
		owner = {
			has_valid_civic = civic_tec_eco_keepers
		}
		
		tec_ecologists_have_modifiers_to_fix = yes
	}
	effect = {
		hidden_effect = {
			# Adds variables
			owner = {
				change_variable = {
					which = tec_terraformed_worlds
					value = 1
				}
			}
		}
		if = {
			limit = {
				has_modifier = "dangerous_wildlife"
			}
			remove_modifier = dangerous_wildlife
			add_modifier = {
				modifier = pm_tec_peaceful_wildlife
				days = -1
			}
			add_deposit = d_tec_sanctified_eco_grounds
		}
		if = {
			limit = {
				has_modifier = "hazardous_weather"
			}
			remove_modifier = hazardous_weather
			add_modifier = {
				modifier = pm_tec_peaceful_weather
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = "weak_magnetic_field"
			}
			remove_modifier = weak_magnetic_field
			add_modifier = {
				modifier = strong_magnetic_field
				days = -1
			}
		}
		if = {
			limit = {
				OR = {
					has_modifier = "unstable_tectonics"
					has_modifier = @gpm_unstable_tectonics_2
				}
			}
			remove_modifier = unstable_tectonics
			remove_modifier = @gpm_unstable_tectonics_2
			add_modifier = {
				modifier = pm_tec_stable_tectonics
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = "tidal_locked"
			}
			remove_modifier = tidal_locked
			add_deposit = d_tec_sanctified_eco_grounds
		}
		if = {
			limit = {
				OR = {
					has_modifier = "asteroid_impacts"
					has_modifier = @gpm_asteroid_impacts_2
				}
			}
			remove_modifier = asteroid_impacts
			remove_modifier = @gpm_asteroid_impacts_2
			add_deposit = d_tec_sanctified_eco_grounds
		}
		if = {
			limit = {
				has_modifier = "wild_storms"
			}
			remove_modifier = wild_storms
			add_deposit = d_tec_sanctified_eco_grounds
		}
		if = {
			limit = {
				has_modifier = "high_gravity"
			}
			remove_modifier = high_gravity
			add_deposit = d_tec_sanctified_eco_grounds
		}
		if = {
			limit = {
				has_modifier = "mineral_poor"
			}
			remove_modifier = mineral_poor
			add_deposit = d_tec_sanctified_eco_grounds
		}
		if = {
			limit = {
				has_modifier = "atmospheric_aphrodisiac"
			}
			remove_modifier = atmospheric_aphrodisiac
			add_deposit = d_tec_sanctified_eco_grounds
		}
		if = {
			limit = {
				has_modifier = "atmospheric_hallucinogen"
			}
			remove_modifier = atmospheric_hallucinogen
			add_deposit = d_tec_sanctified_eco_grounds
		}
		if = {
			limit = {
				has_modifier = "bleak_planet"
			}
			remove_modifier = bleak_planet
			add_deposit = d_tec_sanctified_eco_grounds
		}
		if = {
			limit = {
				has_modifier = "irradiated_planet"
			}
			remove_modifier = irradiated_planet
			add_deposit = d_tec_sanctified_eco_grounds
		}
		if = {
			limit = {
				has_modifier = @gpm_global_thunderstorms
			}
			remove_modifier = @gpm_global_thunderstorms
			add_modifier = {
				modifier = @gpm_frequent_thunderstorms
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_thin_atmospheres
			}
			remove_modifier = @gpm_thin_atmospheres
			add_deposit = d_tec_sanctified_eco_grounds
		}
		if = {
			limit = {
				has_modifier = @gpm_strong_volcanism
			}
			remove_modifier = @gpm_strong_volcanism
			add_deposit = d_tec_sanctified_eco_grounds
		}
		if = {
			limit = {
				has_modifier = @gpm_high_gravity_2
			}
			remove_modifier = @gpm_high_gravity_2
			add_deposit = d_tec_sanctified_eco_grounds
		}
		if = {
			limit = {
				has_modifier = @gpm_hostile_flora
			}
			remove_modifier = @gpm_hostile_flora
			add_deposit = d_tec_sanctified_eco_grounds
		}
		if = {
			limit = {
				has_modifier = @gpm_toxic_gas
			}
			remove_modifier = @gpm_toxic_gas
			add_deposit = d_tec_sanctified_eco_grounds
		}
		if = {
			limit = {
				has_modifier = @gpm_titanic_predators
			}
			remove_modifier = @gpm_titanic_predators
			add_modifier = {
				modifier = pm_tec_peaceful_wildlife
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_unusual_seasons
			}
			remove_modifier = @gpm_unusual_seasons
			add_modifier = {
				modifier = @gpm_perfect_seasons
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_simple_organisms
			}
			remove_modifier = @gpm_simple_organisms
			add_modifier = {
				modifier = @gpm_newly_evolved_complex_organisms
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_unusual_formations
			}
			remove_modifier = @gpm_unusual_formations
			add_deposit = d_tec_sanctified_eco_grounds
		}
		if = {
			limit = {
				has_modifier = @gpm_great_temperature_variation
			}
			remove_modifier = @gpm_great_temperature_variation
			add_modifier = {
				modifier = @gpm_perfect_seasons
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_ice_age
			}
			remove_modifier = @gpm_ice_age
			add_deposit = d_tec_sanctified_eco_grounds
		}
		if = {
			limit = {
				has_modifier = @gpm_locust_plagues
			}
			remove_modifier = @gpm_locust_plagues
			add_deposit = d_tec_sanctified_eco_grounds
		}
		if = {
			limit = {
				has_modifier = @gpm_resilent_parasites
			}
			remove_modifier = @gpm_resilent_parasites
			add_modifier = {
				modifier = @gpm_symbiotic_life
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_trubbles
			}
			remove_modifier = @gpm_trubbles
			add_modifier = {
				modifier = pm_tec_peaceful_wildlife
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_arachnophobia
			}
			remove_modifier = @gpm_arachnophobia
			add_modifier = {
				modifier = pm_tec_peaceful_wildlife
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_giant_worm
			}
			remove_modifier = @gpm_giant_worm
			add_modifier = {
				modifier = pm_tec_peaceful_wildlife
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_sandstorms
			}
			remove_modifier = @gpm_sandstorms
			add_deposit = d_tec_sanctified_eco_grounds
		}
		if = {
			limit = {
				has_modifier = @gpm_quicksand
			}
			remove_modifier = @gpm_quicksand
			add_deposit = d_tec_sanctified_eco_grounds
		}
		if = {
			limit = {
				has_modifier = @gpm_blizzards
			}
			remove_modifier = @gpm_blizzards
			add_modifier = {
				modifier = @gpm_never_ending_aurora
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_abominable_predators
			}
			remove_modifier = @gpm_abominable_predators
			add_modifier = {
				modifier = pm_tec_peaceful_wildlife
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_giant_ocean_snakes
			}
			remove_modifier = @gpm_giant_ocean_snakes
			add_modifier = {
				modifier = pm_tec_peaceful_wildlife
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_cursed_world
			}
			remove_modifier = @gpm_cursed_world
			add_deposit = d_tec_sanctified_eco_grounds
			add_deposit = d_tec_sanctified_eco_grounds
		}
		if = {
			limit = {
				has_modifier = @gpm_strange_alien_eggs
			}
			remove_modifier = @gpm_strange_alien_eggs
			add_deposit = d_tec_sanctified_eco_grounds
		}
		if = {
			limit = {
				has_modifier = @gpm_living_planet
			}
			remove_modifier = @gpm_living_planet
			add_deposit = d_tec_sanctified_eco_grounds
			add_deposit = d_tec_sanctified_eco_grounds
		}
	}
	ai_weight = {
		weight = 1
		modifier = {
			factor = 100
			OR = {
				num_pops > 25
				is_capital = yes
			}
		}
		mult = value:tec_environment_decision_mult
	}
}

#Environmental preservation
decision_tec_environment_preserve = {
	icon = decision_animal_wildlife
	owned_planets_only = yes
	enactment_time = 360
	resources = {
		category = decisions
		cost = {
			energy = 5000
			influence = 50
			multiplier = value:tec_environment_decision_mult
		}
	}
	potential = {
		is_colony = yes
		owner = {
			OR = {
				has_valid_civic = civic_tec_corporate_megareclamators
				has_valid_civic = civic_environmentalist
				AND = {
					has_ethic = ethic_gestalt_preservation
					NOT = {
						has_civic = civic_tec_machine_terraformers
					}
				}
			}
		}
		tec_ecologists_have_modifiers_to_fix = yes
	}
	effect = {
		hidden_effect = {
			# Adds variables
			owner = {
				change_variable = {
					which = tec_terraformed_worlds
					value = 1
				}
			}
		}
		if = {
			limit = {
				has_modifier = "dangerous_wildlife"
			}
			remove_modifier = dangerous_wildlife
			add_modifier = {
				modifier = pm_tec_peaceful_wildlife
				days = -1
			}
			add_deposit = d_tec_preserved_eco_ecology
		}
		if = {
			limit = {
				has_modifier = "hazardous_weather"
			}
			remove_modifier = hazardous_weather
			add_modifier = {
				modifier = pm_tec_peaceful_weather
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = "weak_magnetic_field"
			}
			remove_modifier = weak_magnetic_field
			add_modifier = {
				modifier = strong_magnetic_field
				days = -1
			}
		}
		if = {
			limit = {
				OR = {
					has_modifier = "unstable_tectonics"
					has_modifier = @gpm_unstable_tectonics_2
				}
			}
			remove_modifier = unstable_tectonics
			remove_modifier = @gpm_unstable_tectonics_2
			add_modifier = {
				modifier = pm_tec_stable_tectonics
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = "tidal_locked"
			}
			remove_modifier = tidal_locked
			add_deposit = d_tec_preserved_eco_mining
		}
		if = {
			limit = {
				OR = {
					has_modifier = "asteroid_impacts"
					has_modifier = @gpm_asteroid_impacts_2
				}
			}
			remove_modifier = @gpm_asteroid_impacts_2
			remove_modifier = asteroid_impacts
			add_deposit = d_tec_preserved_eco_mining
		}
		if = {
			limit = {
				has_modifier = "wild_storms"
			}
			remove_modifier = wild_storms
			add_deposit = d_tec_preserved_eco_other
		}
		if = {
			limit = {
				has_modifier = "high_gravity"
			}
			remove_modifier = high_gravity
			add_deposit = d_tec_preserved_eco_mining
		}
		if = {
			limit = {
				has_modifier = "mineral_poor"
			}
			remove_modifier = mineral_poor
			add_deposit = d_tec_preserved_eco_mining
		}
		if = {
			limit = {
				has_modifier = "atmospheric_aphrodisiac"
			}
			remove_modifier = atmospheric_aphrodisiac
			add_deposit = d_tec_preserved_eco_other
		}
		if = {
			limit = {
				has_modifier = "atmospheric_hallucinogen"
			}
			remove_modifier = atmospheric_hallucinogen
			add_deposit = d_tec_preserved_eco_other
		}
		if = {
			limit = {
				has_modifier = "bleak_planet"
			}
			remove_modifier = bleak_planet
			add_deposit = d_tec_preserved_eco_ecology
		}
		if = {
			limit = {
				has_modifier = "irradiated_planet"
			}
			remove_modifier = irradiated_planet
			add_deposit = d_tec_preserved_eco_other
		}
		if = {
			limit = {
				has_modifier = @gpm_global_thunderstorms
			}
			remove_modifier = @gpm_global_thunderstorms
			add_modifier = {
				modifier = @gpm_frequent_thunderstorms
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_thin_atmospheres
			}
			remove_modifier = @gpm_thin_atmospheres
			add_modifier = {
				modifier = @gpm_dense_atmospheres
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_strong_volcanism
			}
			remove_modifier = @gpm_strong_volcanism
			add_deposit = d_tec_preserved_eco_mining
		}
		if = {
			limit = {
				has_modifier = @gpm_high_gravity_2
			}
			remove_modifier = @gpm_high_gravity_2
			add_deposit = d_tec_preserved_eco_mining
		}
		if = {
			limit = {
				has_modifier = @gpm_hostile_flora
			}
			remove_modifier = @gpm_hostile_flora
			add_modifier = {
				modifier = pm_tec_peaceful_wildlife
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_toxic_gas
			}
			remove_modifier = @gpm_toxic_gas
			add_deposit = d_tec_preserved_eco_ecology
		}
		if = {
			limit = {
				has_modifier = @gpm_titanic_predators
			}
			remove_modifier = @gpm_titanic_predators
			add_modifier = {
				modifier = pm_tec_peaceful_wildlife
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_unusual_seasons
			}
			remove_modifier = @gpm_unusual_seasons
			add_modifier = {
				modifier = @gpm_perfect_seasons
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_simple_organisms
			}
			remove_modifier = @gpm_simple_organisms
			add_modifier = {
				modifier = @gpm_newly_evolved_complex_organisms
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_unusual_formations
			}
			remove_modifier = @gpm_unusual_formations
			add_deposit = d_tec_preserved_eco_mining
		}
		if = {
			limit = {
				has_modifier = @gpm_great_temperature_variation
			}
			remove_modifier = @gpm_great_temperature_variation
			add_modifier = {
				modifier = @gpm_perfect_seasons
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_ice_age
			}
			remove_modifier = @gpm_ice_age
			add_deposit = d_tec_preserved_eco_mining
		}
		if = {
			limit = {
				has_modifier = @gpm_locust_plagues
			}
			remove_modifier = @gpm_locust_plagues
			add_deposit = d_tec_preserved_eco_ecology
		}
		if = {
			limit = {
				has_modifier = @gpm_resilent_parasites
			}
			remove_modifier = @gpm_resilent_parasites
			add_modifier = {
				modifier = @gpm_symbiotic_life
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_trubbles
			}
			remove_modifier = @gpm_trubbles
			add_modifier = {
				modifier = pm_tec_peaceful_wildlife
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_arachnophobia
			}
			remove_modifier = @gpm_arachnophobia
			add_modifier = {
				modifier = pm_tec_peaceful_wildlife
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_giant_worm
			}
			remove_modifier = @gpm_giant_worm
			add_modifier = {
				modifier = pm_tec_peaceful_wildlife
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_sandstorms
			}
			remove_modifier = @gpm_sandstorms
			add_deposit = d_tec_preserved_eco_mining
		}
		if = {
			limit = {
				has_modifier = @gpm_quicksand
			}
			remove_modifier = @gpm_quicksand
			add_deposit = d_tec_preserved_eco_mining
		}
		if = {
			limit = {
				has_modifier = @gpm_blizzards
			}
			remove_modifier = @gpm_blizzards
			add_modifier = {
				modifier = @gpm_never_ending_aurora
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_abominable_predators
			}
			remove_modifier = @gpm_abominable_predators
			add_modifier = {
				modifier = pm_tec_peaceful_wildlife
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_giant_ocean_snakes
			}
			remove_modifier = @gpm_giant_ocean_snakes
			add_modifier = {
				modifier = pm_tec_peaceful_wildlife
				days = -1
			}
		}
		if = {
			limit = {
				has_modifier = @gpm_cursed_world
			}
			remove_modifier = @gpm_cursed_world
			add_deposit = d_tec_preserved_eco_other
			add_deposit = d_tec_preserved_eco_other
		}

		if = {
			limit = {
				has_modifier = @gpm_strange_alien_eggs
			}
			remove_modifier = @gpm_strange_alien_eggs
			add_deposit = d_tec_preserved_eco_ecology
		}

		if = {
			limit = {
				has_modifier = @gpm_living_planet
			}
			remove_modifier = @gpm_living_planet
			add_deposit = d_tec_preserved_eco_ecology
			add_deposit = d_tec_preserved_eco_ecology
		}
	}
	ai_weight = {
		weight = 1
		modifier = {
			factor = 100
			OR = {
				num_pops > 25
				is_capital = yes
			}
		}
		mult = value:tec_environment_decision_mult
	}
}

# Ecological enhacement
decision_tec_environment_enhance = {
	owned_planets_only = yes
	enactment_time = 720
	icon = decision_resort_colony
	resources = {
		category = decisions
		cost = {
			energy = 7500
			influence = 75
		}
	}
	potential = {
		OR = {
			uses_district_set = standard
			tec_is_ringworld = yes
			tec_is_elysium = yes
			tec_is_ecoworld = yes
		}
		owner = {
			OR = {
				has_valid_civic = civic_tec_eco_engineers
				has_valid_civic = civic_tec_eco_keepers
				has_valid_civic = civic_environmentalist
				has_valid_civic = civic_tec_corporate_megareclamators
				has_valid_civic = civic_tec_machine_terraformers
				has_ethic = ethic_gestalt_preservation
			}
		}
		planet = {
			NOT = {
				has_planet_flag = tec_enhanced_by_terraformers
			}
		}
	}

	allow = {
		NOT = {
			has_planet_flag = tec_block_enhancing
		}
	}

	effect = {
		custom_tooltip = decision_tec_environment_enhance.tooltip
		hidden_effect = {
			# Adds variables
			owner = {
				change_variable = {
					which = tec_terraformed_worlds
					value = 1
				}
			}
			set_planet_flag = tec_enhanced_by_terraformers
			#for regular planets, regular modifiers
			if = {
				limit = {
					uses_district_set = standard
				}
				#keepers
				if = {
					limit = {
						owner = {
							has_valid_civic = civic_tec_eco_keepers
						}
						OR = {
							has_deposit = d_tec_sanctified_eco_grounds
							num_uncleared_blockers > 0
						}
					}
					while = {
						count = 2
						add_deposit = d_tec_sanctified_eco_grounds
					}
				}
				if = {
					limit = {
						owner = {
							has_valid_civic = civic_tec_eco_keepers
						}
						OR = {
							NOT = {
								has_deposit = d_tec_sanctified_eco_grounds
							}
							tec_is_perfect_planet = yes							# perfect world
						}
					}
					while = {
						count = 4
						add_deposit = d_tec_sanctified_eco_grounds
					}
				}
				#terraformers
				if = {
					limit = {
						owner = {
							OR = {
								has_valid_civic = civic_tec_eco_engineers
								has_civic = civic_tec_machine_terraformers
							}
						}
						OR = {
							num_uncleared_blockers > 0
							has_deposit = d_tec_eco_basin
							has_deposit = d_tec_eco_glacier
							has_deposit = d_tec_eco_jungle
							has_deposit = d_tec_eco_kelp
							has_deposit = d_tec_eco_mountains_range
							has_deposit = d_tec_eco_sinkhole
							has_deposit = d_tec_eco_swamp
							has_deposit = d_tec_eco_volcano
							has_deposit = d_tec_eco_wildlife_blocker
						}
					}
					while = {
						count = 2
						random_list = {
							10 = {
								add_deposit = d_tec_eco_basin
							}
							10 = {
								add_deposit = d_tec_eco_glacier
							}
							10 = {
								add_deposit = d_tec_eco_jungle
							}
							10 = {
								add_deposit = d_tec_eco_kelp
							}
							10 = {
								add_deposit = d_tec_eco_mountains_range
							}
							10 = {
								add_deposit = d_tec_eco_sinkhole
							}
							10 = {
								add_deposit = d_tec_eco_swamp
							}
							10 = {
								add_deposit = d_tec_eco_volcano
							}
							10 = {
								add_deposit = d_tec_eco_wildlife_blocker
							}
						}
					}
				}
				if = {
					limit = {
						owner = {
							OR = {
								has_valid_civic = civic_tec_eco_engineers
								has_civic = civic_tec_machine_terraformers
							}
						}
						OR = {
							NOR = {
								has_deposit = d_tec_eco_basin
								has_deposit = d_tec_eco_glacier
								has_deposit = d_tec_eco_jungle
								has_deposit = d_tec_eco_kelp
								has_deposit = d_tec_eco_mountains_range
								has_deposit = d_tec_eco_sinkhole
								has_deposit = d_tec_eco_swamp
								has_deposit = d_tec_eco_volcano
								has_deposit = d_tec_eco_wildlife_blocker
							}
							tec_is_perfect_planet = yes							# perfect world
						}
					}
					while = {
						count = 4
						random_list = {
							10 = {
								add_deposit = d_tec_eco_basin
							}
							10 = {
								add_deposit = d_tec_eco_glacier
							}
							10 = {
								add_deposit = d_tec_eco_jungle
							}
							10 = {
								add_deposit = d_tec_eco_kelp
							}
							10 = {
								add_deposit = d_tec_eco_mountains_range
							}
							10 = {
								add_deposit = d_tec_eco_sinkhole
							}
							10 = {
								add_deposit = d_tec_eco_swamp
							}
							10 = {
								add_deposit = d_tec_eco_volcano
							}
							10 = {
								add_deposit = d_tec_eco_wildlife_blocker
							}
						}
					}
				}
				#environmentalist
				if = {
					limit = {
						owner = {
							OR = {
								has_valid_civic = civic_environmentalist
								has_valid_civic = civic_tec_corporate_megareclamators
								AND = {
									has_ethic = ethic_gestalt_preservation
									NOT = {
										has_civic = civic_tec_machine_terraformers
									}
								}
							}
						}
						OR = {
							num_uncleared_blockers > 0
							has_deposit = d_tec_preserved_eco_ecology
							has_deposit = d_tec_preserved_eco_mining
							has_deposit = d_tec_preserved_eco_other
						}
					}
					while = {
						count = 2
						random_list = {
							10 = {
								add_deposit = d_tec_preserved_eco_ecology
							}
							10 = {
								add_deposit = d_tec_preserved_eco_mining
							}
							10 = {
								add_deposit = d_tec_preserved_eco_other
							}
						}
					}
				}
				if = {
					limit = {
						owner = {
							OR = {
								has_valid_civic = civic_environmentalist
								has_valid_civic = civic_tec_corporate_megareclamators
								AND = {
									has_ethic = ethic_gestalt_preservation
									NOT = {
										has_civic = civic_tec_machine_terraformers
									}
								}
							}
						}
						OR = {
							NOR = {
								has_deposit = d_tec_preserved_eco_ecology
								has_deposit = d_tec_preserved_eco_mining
								has_deposit = d_tec_preserved_eco_other
							}
							tec_is_perfect_planet = yes							# perfect world
						}
					}
					while = {
						count = 4
						random_list = {
							10 = {
								add_deposit = d_tec_preserved_eco_ecology
							}
							10 = {
								add_deposit = d_tec_preserved_eco_mining
							}
							10 = {
								add_deposit = d_tec_preserved_eco_other
							}
						}
					}
				}
			}
			#for ringworlds, special modifiers
			if = {
				limit = {
					tec_is_elysium = yes
				}
				if = {
					limit = {
						NOT = {
							has_modifier = pm_tec_engineered_weather
						}
					}
					add_modifier = {
						modifier = pm_tec_engineered_weather
						days = -1
					}
				}
				if = {
					limit = {
						owner = {
							has_valid_civic = civic_tec_eco_keepers
						}
					}
					add_deposit = d_tec_eco_terraformed_ring
					add_deposit = d_tec_sanctified_eco_grounds_ring
					add_deposit = d_tec_sanctified_eco_grounds_ring
				}
				if = {
					limit = {
						owner = {
							OR = {
								has_valid_civic = civic_tec_eco_engineers
								has_civic = civic_tec_machine_terraformers
							}
						}
					}
					add_deposit = d_tec_eco_terraformed_ring
					while = {
						count = 2
						random_list = {
							10 = {
								add_deposit = d_tec_eco_synthetic_life
							}
							10 = {
								add_deposit = d_tec_eco_synthetic_volcano
							}
							10 = {
								add_deposit = d_tec_eco_synthetic_flora
							}
						}
					}
				}
				if = {
					limit = {
						owner = {
							OR = {
								has_valid_civic = civic_tec_corporate_megareclamators
								has_valid_civic = civic_environmentalist
								AND = {
									has_ethic = ethic_gestalt_preservation
									NOT = {
										has_civic = civic_tec_machine_terraformers
									}
								}
							}
						}
					}
					add_deposit = d_tec_eco_terraformed_ring
					add_deposit = d_tec_preserved_eco_ring
					add_deposit = d_tec_preserved_eco_ring_2
				}
			}
			#for elysiums
			if = {
				limit = {
					OR = {
						tec_is_ringworld = yes
						tec_is_modded_space_arcology = yes
					}
				}
				if = {
					limit = {
						NOT = {
							has_modifier = pm_tec_engineered_weather
						}
					}
					add_modifier = {
						modifier = pm_tec_engineered_weather
						days = -1
					}
				}
				if = {
					limit = {
						owner = {
							has_valid_civic = civic_tec_eco_keepers
						}
					}
					add_deposit = d_tec_eco_terraformed_ring
					add_deposit = d_tec_sanctified_eco_grounds_ring
				}
				if = {
					limit = {
						owner = {
							OR = {
								has_valid_civic = civic_tec_eco_engineers
								has_civic = civic_tec_machine_terraformers
							}
						}
					}
					add_deposit = d_tec_eco_terraformed_ring
					while = {
						count = 1
						random_list = {
							10 = {
								add_deposit = d_tec_eco_synthetic_life
							}
							10 = {
								add_deposit = d_tec_eco_synthetic_volcano
							}
							10 = {
								add_deposit = d_tec_eco_synthetic_flora
							}
						}
					}
				}
				if = {
					limit = {
						owner = {
							OR = {
								#	has_valid_civic = civic_tec_corporate_exploiters
								has_valid_civic = civic_environmentalist
								AND = {
									has_ethic = ethic_gestalt_preservation
									NOT = {
										has_civic = civic_tec_machine_terraformers
									}
								}
							}
						}
					}
					add_deposit = d_tec_eco_terraformed_ring
					random_list = {
						10 = {
							add_deposit = d_tec_preserved_eco_ring
						}
						10 = {
							add_deposit = d_tec_preserved_eco_ring_2
						}
					}
				}
			}
		}
	}
	
	on_queued = {
		set_planet_flag = tec_block_enhancing
	}

	on_unqueued = {
		remove_planet_flag = tec_block_enhancing
	}

	ai_weight = {
		weight = 1
		modifier = {
			factor = 20
			OR = {
				num_pops > 25
				is_capital = yes
			}
		}
		modifier = {
			factor = 5
			OR = {
				tec_is_ecoworld = yes
				tec_is_perfect_planet = yes
				tec_is_ringworld = yes
				tec_is_elysium = yes
			}
		}
		modifier = {
			factor = 0
			num_uncleared_blockers > 0
		}
	}
}
