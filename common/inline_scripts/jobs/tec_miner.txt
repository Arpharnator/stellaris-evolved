# tec_miner

# Regular
	inline_script = {
		script = jobs/tec_job
		trigger = "
			exists = owner

			$trigger$

			inline_script = {
			 	script = jobs/helper/tec_planet_not_exists_or_job_trigger
			 	trigger = tec_has_miner_planet_swap
				negate = yes
			}
			owner = {
				inline_script = { script = tec_read_cache scope = country trigger = tec_uses_regular_empire_jobs }
				NOT = { inline_script = { script = tec_read_cache scope = country trigger = tec_has_miner_swap } }
			}
		"
		job = miner
		count = $regular_count$
		mult = $mult$
		display = $display$
	}

	inline_script = {
		script = jobs/tec_job
		trigger = "
			exists = owner

			$trigger$

			inline_script = {
			 	script = jobs/helper/tec_planet_not_exists_or_job_trigger
			 	trigger = tec_has_miner_planet_swap
				negate = yes
			}
			owner = {
				inline_script = { script = tec_read_cache scope = country trigger = tec_uses_regular_empire_jobs }
				inline_script = { script = tec_read_cache redirect_scope = prev scope = planet trigger = tec_mining_aqua_district_swap }
			}
		"
		job = tec_reef_miner
		count = $regular_secondary_count$
		mult = $mult$
		display = $display$
	}

	inline_script = { # FE
		script = jobs/tec_job
		trigger = "
			exists = owner

			$trigger$

			inline_script = {
			 	script = jobs/helper/tec_planet_not_exists_or_job_trigger
			 	trigger = tec_has_miner_planet_swap
				negate = yes
			}
			owner = { is_fallen_empire_spiritualist = yes }
		"
		job = fe_acolyte_mine
		count = $regular_count$
		mult = $mult$
		display = $display$
	}



	inline_script = { # Ringminer
		script = jobs/tec_job
		trigger = "
			exists = owner

			$trigger$

			inline_script = {
			 	script = jobs/helper/tec_planet_not_exists_or_job_trigger
			 	trigger = tec_has_scrap_miner
			}
			owner = { inline_script = { script = tec_read_cache scope = country trigger = tec_uses_regular_empire_jobs } }
		"
		job = scrap_miner
		count = $regular_count$
		mult = $mult$
		display = $display$
	}

	inline_script = { # Matterminer
		script = jobs/tec_job
		trigger = "
			exists = owner

			$trigger$

			inline_script = {
			 	script = jobs/helper/tec_planet_not_exists_or_job_trigger
			 	trigger = tec_has_matter_miner
			}
			owner = { inline_script = { script = tec_read_cache scope = country trigger = tec_uses_regular_empire_jobs }}
		"
		job = tec_matterminer
		count = $regular_count$
		mult = $mult$
		display = $display$
	}

#

# Hive
	inline_script = {
		script = jobs/tec_job
		trigger = "
			exists = owner

			$trigger$

			inline_script = {
			 	script = jobs/helper/tec_planet_not_exists_or_job_trigger
			 	trigger = tec_has_miner_planet_swap
				negate = yes
			}
			owner = {
				is_hive_empire = yes
				NOT = { inline_script = { script = tec_read_cache redirect_scope = prev scope = planet trigger = tec_has_miner_swap } }
			}
		"
		job = mining_drone
		count = $hive_count$
		mult = $mult$
		display = $display$
	}

	inline_script = {
		script = jobs/tec_job
		trigger = "
			exists = owner

			$trigger$

			inline_script = {
			 	script = jobs/helper/tec_planet_not_exists_or_job_trigger
			 	trigger = tec_has_miner_planet_swap
				negate = yes
			}
			owner = {
				is_hive_empire = yes
				inline_script = { script = tec_read_cache redirect_scope = prev scope = planet trigger = tec_mining_aqua_district_swap }
			}
		"
		job = tec_reef_drone
		count = $hive_secondary_count$
		mult = $mult$
		display = $display$
	}

	inline_script = {
		script = jobs/tec_job
		trigger = "
			exists = owner

			$trigger$

			inline_script = {
			 	script = jobs/helper/tec_planet_not_exists_or_job_trigger
			 	trigger = tec_has_scrap_miner
			}
			owner = {
				is_hive_empire = yes
			}
		"
		job = scrap_miner_drone
		count = $hive_count$
		mult = $mult$
		display = $display$
	}
	inline_script = { # Matterminer
		script = jobs/tec_job
		trigger = "
			exists = owner

			$trigger$

			inline_script = {
			 	script = jobs/helper/tec_planet_not_exists_or_job_trigger
			 	trigger = tec_has_matter_miner
			}
			owner = {
				is_hive_empire = yes
			}
		"
		job = tec_matterminer_drone
		count = $hive_count$
		mult = $mult$
		display = $display$
	}
# /


# Machine
	inline_script = {
		script = jobs/tec_job
		trigger = "
			exists = owner

			$trigger$

			inline_script = {
			 	script = jobs/helper/tec_planet_not_exists_or_job_trigger
			 	trigger = tec_has_matter_miner
			}
			owner = {
				is_machine_empire = yes
				NOT = { inline_script = { script = tec_read_cache scope = country trigger = tec_has_miner_swap } }
			}
		"
		job = mining_drone
		count = $machine_count$
		mult = $mult$
		display = $display$
	}

	inline_script = {
		script = jobs/tec_job
		trigger = "
			exists = owner

			$trigger$

			inline_script = {
			 	script = jobs/helper/tec_planet_not_exists_or_job_trigger
			 	trigger = tec_has_scrap_miner
			}
			owner = {
				is_machine_empire = yes
			}
		"
		job = scrap_miner_drone
		count = $machine_count$
		mult = $mult$
		display = $display$
	}
	inline_script = { # Matterminer
		script = jobs/tec_job
		trigger = "
			exists = owner

			$trigger$

			inline_script = {
			 	script = jobs/helper/tec_planet_not_exists_or_job_trigger
			 	trigger = tec_has_matter_miner
			}
			owner = {
				is_machine_empire = yes
			}
		"
		job = tec_matterminer_drone
		count = $machine_count$
		mult = $mult$
		display = $display$
	}
# /



inline_script = {
	script = mod_support/tec_inlines_include
	include_script = jobs/tec_miner
	parameters = "
		regular_count = $regular_count$
		regular_secondary_count = $regular_secondary_count$
		hive_count = $hive_count$
		hive_secondary_count = $hive_secondary_count$
		machine_count = $machine_count$
		machine_secondary_count = $machine_secondary_count$
		mult = $mult$
		display = $display$
		trigger = \"\\\"$trigger$\"\\\"
	"
}

