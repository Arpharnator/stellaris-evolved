# capitals/inline_evolved_common_habitat_modifiers

# $tier$ -added here in case it is needed

# Deficits
triggered_planet_modifier = {
	modifier = { planet_stability_add = 1 }
	mult = modifier:habitat_stability_add
}
# /

triggered_planet_modifier = {	# tradition vd
	potential = {
		exists = owner
		owner = { has_active_tradition = tr_prosperity_void_works }
	}
	modifier = {
		planet_max_buildings_add = 1
	}
}

triggered_planet_modifier = {	# ap voidborn
	potential = {
		exists = owner
		owner = { has_ascension_perk = ap_voidborn }
	}
	modifier = {
		planet_max_buildings_add = 2
	}
}

triggered_planet_modifier = {	# Void dwellers
	potential = {
		exists = owner
		owner = { has_origin = origin_void_dwellers }
	}
	modifier = {
		planet_max_buildings_add = @tec_capital_hab_vb_buildings_t$tier$
	}
}

# New hab penalties
	triggered_planet_modifier = {	# New habitats 1
		potential = {
			planet = {
				tec_is_upgraded_habitat = no
			}
		}
		modifier = {
			pop_growth_speed_reduction = 0.25
			planet_pop_assembly_reduction = 0.25
			planet_pop_assembly_organic_reduction = 0.25
		}
	}

	triggered_planet_modifier = {	# New habitats 2
		potential = {
			planet = {
				tec_is_fully_upgraded_habitat = no
			}
		}
		modifier = {
			pop_growth_speed_reduction = 0.25
			planet_pop_assembly_reduction = 0.25
			planet_pop_assembly_organic_reduction = 0.25
		}
	}
# /

# modifiers
	triggered_planet_modifier = {	# planet slot exclusion
		potential = {
			tec_has_all_slots_unlocked = yes
			tec_is_fully_upgraded_habitat = yes
		}
		planet_max_buildings_add = 20
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_active_tradition = tr_cybernetics_organ_harvesting }
			has_current_purge = yes
			growing_species = { has_trait = trait_cybernetic }
		}
		pop_growth_speed = 0.10
	}
# /

# Synth finish
	inline_script = {
		script = modifiers/inline_evolved_assembly_robotic
		mult = 1
		trigger = "
			owner = { has_active_tradition = tr_synthetics_finish_machine }
		"
	}

	inline_script = {
		script = modifiers/inline_evolved_assembly_robotic
		mult = 2
		trigger = "
			owner = { has_active_tradition = tr_synthetics_finish }
		"
	}
# /

# Versatility housing
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_active_tradition = tr_versatility_spatial_optimization
			}
		}
		planet_housing_mult = 0.05
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_active_tradition = tr_versatility_spatial_optimization
			}
			has_upgraded_capital = yes
		}
		planet_housing_mult = 0.05
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_active_tradition = tr_versatility_spatial_optimization
			}
			has_major_upgraded_capital = yes
		}
		planet_housing_mult = 0.05
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_active_tradition = tr_versatility_spatial_optimization
			}
			has_fully_upgraded_capital = yes
		}
		planet_housing_mult = 0.05
	}
# /