# common\traditions\zzae_ow_cybernetics_assimilator.txt

tr_cybernetics_assimilator_adopt = {
	unlocks_agenda = agenda_cybernetic_advantage_assimilator
	possible = {
		has_ascension_perk = ap_organo_machine_interfacing_assimilator
		has_technology = tech_integrated_cybernetics
	}
	custom_tooltip = tr_cybernetics_assimilator_adopt_desc
	# Increased effects from Assimilating organic pops.
	# See apply_post_assimilation_effects scripted effect

	on_enabled = {
		if = { # Machine age
			limit = {
				has_machine_age_dlc = yes
				has_civic = civic_machine_assimilator
			}
			hidden_effect = {
				country_event = {
					id = cyber.2010
					days = 2
				}
			}
		}
	}
}

tr_cybernetics_assimilator_finish = {
	
	custom_tooltip = tr_cybernetics_assimilator_finish_tooltip
	modifier = {
		ascension_perks_add = 1
	}

	on_enabled = {
		if = { # Machine age
			limit = {
				has_country_flag = driven_cybernetics
			}
			hidden_effect = {
				country_event = {
					id = cyber.2015
					days = 2
				}
			}
		}
		hidden_effect = {
			country_event = { # GATE/MIXED Announcer
				id = tec_cybernetic_path.150
				days = 360
			}
		}
	}
}

tr_cybernetics_assimilator_inevitable_assimilation = {
	possible = {
		has_tradition = tr_cybernetics_assimilator_adopt
	}
	custom_tooltip_with_modifiers = tr_cybernetics_assimilator_inevitable_assimilation_desc
	modifier = {
		MACHINE_species_trait_picks_add = 1
	}
}

tr_cybernetics_assimilator_metabolic_reprocessing = {
	possible = {
		has_tradition = tr_cybernetics_assimilator_inevitable_assimilation
	}
	modifier = {
		planet_pops_cyborgs_upkeep_mult = -0.10
	}
}

tr_cybernetics_assimilator_integrated_anatomy = {
	possible = {
		has_tradition = tr_cybernetics_assimilator_inevitable_assimilation
	}
	custom_tooltip_with_modifiers = tr_cybernetics_assimilator_integrated_anatomy_desc
	# Allows application and removal of cybernetic traits onto cybernetic species.
}

tr_cybernetics_assimilator_gestation = {
	possible = {
		has_tradition = tr_cybernetics_assimilator_metabolic_reprocessing
	}
	custom_tooltip = tr_cybernetics_assimilator_gestation_desc
	# Unlocks Crucible World planetary Designation.
}

# NOTE: Adjusted only this for cybernetic trait purposes
tr_cybernetics_assimilator_modular_cybernetics = {
	possible = {
		has_tradition = tr_cybernetics_assimilator_integrated_anatomy
	}
	custom_tooltip_with_modifiers = tr_cybernetics_assimilator_modular_cybernetics_tt
	modifier = {
		MODIFY_SPECIES_COST_MULT = -0.5
	}

	# These are hidden as cyborg trait becomes a 'negative' due to cost
	#triggered_modifier = {
	#	potential = { always = yes }
	#	BIOLOGICAL_species_trait_points_add = 1
	#	mult = modifier:MACHINE_species_trait_points_add
	#}
	triggered_modifier = {
		potential = { always = yes }
		BIOLOGICAL_species_trait_picks_add = 1
		BIOSERVANT_species_trait_picks_add = 1
		# Remove if replicant is handled differently
		REPLICANT_species_trait_picks_add = 1
		mult = modifier:MACHINE_species_trait_picks_add
	}
	
	ai_weight = {
		factor = 1000
	}
}