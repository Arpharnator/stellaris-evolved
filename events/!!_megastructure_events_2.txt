namespace = megastructures

planet_event = {
    id = megastructures.20
    hide_window = yes

    is_triggered_only = yes

    trigger = {
        uses_habitat_capitals = yes
        OR = {
            last_building_changed = building_hab_major_capital
            last_building_changed = building_tec_hab_machine_major_capital
            last_building_changed = building_tec_hab_hive_major_capital
            last_building_changed = building_tec_hab_biohive_major_capital
            last_building_changed = building_tec_hab_cyberhive_major_capital
        }
    }

    immediate = {
        increase_habitat_level_effect = yes
        owner = {
            if = {
                limit = {
                    has_ascension_perk = ap_voidborn
                    NOT = { has_technology = tech_habitat_3 }
                    NOT = { has_tech_option = tech_habitat_3 }
                }
                add_research_option = tech_habitat_3
            }
        }
    }
}

planet_event = {
    id = megastructures.30
    hide_window = yes

    is_triggered_only = yes

    trigger = {
        uses_habitat_capitals = yes
        OR = {
            last_building_changed = building_hab_system_capital
            last_building_changed = building_tec_hab_machine_system_capital
            last_building_changed = building_tec_hab_hive_system_capital
            last_building_changed = building_tec_hab_biohive_system_capital
            last_building_changed = building_tec_hab_cyberhive_system_capital
        }
    }

    immediate = {
        increase_habitat_level_effect = yes
    }
}